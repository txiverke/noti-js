Object.defineProperty(exports,"__esModule",{value:!0});const t={body:".notijs_container{position:fixed;width:250px;height: auto;flex-direction:column;list-style:none;padding:5px 0;margin:0;display:flex;align-items:center;}.notijs_message{width:250px;height:auto;border:1px solid rgb(0 0 0 / 0.2);border-radius:3px;box-shadow:0 3px 10px rgb(0 0 0 / 0.2);background:white;padding:10px;margin:5px 0;font-size:13px;box-sizing:border-box;opacity:0;transform:translate(0,0);transition:transform ease-in-out 250ms, opacity ease-in-out 250ms;display:flex;align-items:center;}.notijs_txt{flex:1;margin:0 6px 0 0;}.notijs_icon{margin:0 8px 0 0;width:18px;height:auto;}",progress:".notijs_progress{position:absolute;bottom:1px;left:1px;width:0;height:1px;background:rgb(0 0 0 / 0.2)}",btn:".notijs_btn{background:transparent;border:none;cursor:pointer;padding:0 0 0 6px;display:flex;justify-content:center;align-items:center;}",animation:".notijs_rotate{animation: notijs_rotation .75s linear infinite;}@keyframes notijs_rotation {from{transform: rotate(0deg);}to{transform: rotate(359deg);}"},e="render_message_container",s=3,i="top_right";var n="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMTYgMTYiPgogIDxwYXRoIGQ9Ik0xMy44NTQgMy42NDZhLjUuNSAwIDAgMSAwIC43MDhsLTcgN2EuNS41IDAgMCAxLS43MDggMGwtMy41LTMuNWEuNS41IDAgMSAxIC43MDgtLjcwOEw2LjUgMTAuMjkzbDYuNjQ2LTYuNjQ3YS41LjUgMCAwIDEgLjcwOCAweiIvPgo8L3N2Zz4=",o="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMTYgMTYiPgogIDxwYXRoIGQ9Ik03LjkzOCAyLjAxNkEuMTMuMTMgMCAwIDEgOC4wMDIgMmEuMTMuMTMgMCAwIDEgLjA2My4wMTYuMTQ2LjE0NiAwIDAgMSAuMDU0LjA1N2w2Ljg1NyAxMS42NjdjLjAzNi4wNi4wMzUuMTI0LjAwMi4xODNhLjE2My4xNjMgMCAwIDEtLjA1NC4wNi4xMTYuMTE2IDAgMCAxLS4wNjYuMDE3SDEuMTQ2YS4xMTUuMTE1IDAgMCAxLS4wNjYtLjAxNy4xNjMuMTYzIDAgMCAxLS4wNTQtLjA2LjE3Ni4xNzYgMCAwIDEgLjAwMi0uMTgzTDcuODg0IDIuMDczYS4xNDcuMTQ3IDAgMCAxIC4wNTQtLjA1N3ptMS4wNDQtLjQ1YTEuMTMgMS4xMyAwIDAgMC0xLjk2IDBMLjE2NSAxMy4yMzNjLS40NTcuNzc4LjA5MSAxLjc2Ny45OCAxLjc2N2gxMy43MTNjLjg4OSAwIDEuNDM4LS45OS45OC0xLjc2N0w4Ljk4MiAxLjU2NnoiLz4KICA8cGF0aCBkPSJNNy4wMDIgMTJhMSAxIDAgMSAxIDIgMCAxIDEgMCAwIDEtMiAwek03LjEgNS45OTVhLjkwNS45MDUgMCAxIDEgMS44IDBsLS4zNSAzLjUwN2EuNTUyLjU1MiAwIDAgMS0xLjEgMEw3LjEgNS45OTV6Ii8+Cjwvc3ZnPg==";class a{constructor(t,n){this.text=t,this.options=n,this.text=t,this.duration=1e3*(n?.duration||s),this.position=n?.position||i,this.icon=n?.icon,this.extend=n?.extend,this.$container=document.getElementById(e)||document.createElement("ol"),this.animate=this.animate.bind(this),this.observer=new MutationObserver((t=>{for(const s of t)"childList"===s.type&&s.target.id===e&&this.animate("in")}))}init(){this.observer.observe(document,{childList:!0,subtree:!0}),document.getElementById(e)||(this.setCSS("body",t.body),this.$container.id=e,this.$container.classList.add("notijs_container"),document.body.append(this.$container)),this.$message=this.setExtend(document.createElement("li"),this.extend?.message||{}),this.$message.classList.add("notijs_message"),this.$message.setAttribute("role","alert"),this.$message.setAttribute("aria-live","polite"),this.position!==this.$container.dataset.position&&(this.$container=this.setPosition(this.$container,this.position)),this.icon&&this.$message.append(this.setIcon());const s=document.createElement("span");s.classList.add("notijs_txt"),s.textContent=this.text,this.$message.append(s),this.$container.append(this.$message)}animate(t){this.$message.dataset.animation=t;let e=[0,0];switch(this.position){case"top":e="in"===t?[0,10]:[0,-10];break;case"bottom":e="in"===t?[0,-10]:[0,10];break;case"top_right":case"bottom_right":e="in"===t?[-10,0]:[10,0];break;case"top_left":case"bottom_left":e="in"===t?[10,0]:[-10,0]}setTimeout((()=>{this.$message.style.transform=`translate(${e[0]}px, ${e[1]}px)`,this.$message.style.opacity="in"===t?"1":"0"})),this.observer.disconnect()}setIcon(){return this.$icon=document.createElement("img"),"object"==typeof this.icon?(this.$icon.src=this.icon.src,this.$icon.alt=this.icon.alt||"Icon"):(this.$icon.src="error"===this.icon?o:"success"===this.icon?n:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiAgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBkPSJNMTQgMWExIDEgMCAwIDEgMSAxdjhhMSAxIDAgMCAxLTEgMWgtMi41YTIgMiAwIDAgMC0xLjYuOEw4IDE0LjMzMyA2LjEgMTEuOGEyIDIgMCAwIDAtMS42LS44SDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTFoMTJ6TTIgMGEyIDIgMCAwIDAtMiAydjhhMiAyIDAgMCAwIDIgMmgyLjVhMSAxIDAgMCAxIC44LjRsMS45IDIuNTMzYTEgMSAwIDAgMCAxLjYgMGwxLjktMi41MzNhMSAxIDAgMCAxIC44LS40SDE0YTIgMiAwIDAgMCAyLTJWMmEyIDIgMCAwIDAtMi0ySDJ6Ii8+CiAgPHBhdGggZD0iTTMgMy41YS41LjUgMCAwIDEgLjUtLjVoOWEuNS41IDAgMCAxIDAgMWgtOWEuNS41IDAgMCAxLS41LS41ek0zIDZhLjUuNSAwIDAgMSAuNS0uNWg5YS41LjUgMCAwIDEgMCAxaC05QS41LjUgMCAwIDEgMyA2em0wIDIuNWEuNS41IDAgMCAxIC41LS41aDVhLjUuNSAwIDAgMSAwIDFoLTVhLjUuNSAwIDAgMS0uNS0uNXoiLz4KPC9zdmc+",this.$icon.alt=this.icon),this.$icon.classList.add("notijs_icon"),this.$icon}setCSS(t,e){const s=`notijs_${t}`;if(!document.getElementById(s)){const t=document.createElement("style");t.id=s,t.textContent=e,document.head.append(t)}}setExtend(t,e){for(let s in e)t.style[s]=e[s];return t}setPosition(t,e){const s={},i=e.split("_");for(let t of i)s[t]=0;return this.setExtend(t,1===i.length?{...s,width:"100%"}:s)}destroy(){this.$message.remove()}}class r extends a{constructor(t,e){super(t,e),this.endTransitionEventListener=()=>this.destroy()}render(){this.init(),this.setCSS("progress",t.progress),this.$progress=this.setExtend(document.createElement("div"),this.extend?.progressbar||{}),this.$progress.classList.add("notijs_progress"),this.$message.appendChild(this.$progress),this.$message.addEventListener("transitionend",this.endTransitionEventListener),window.requestAnimationFrame(this.progressBar.bind(this)),setTimeout((()=>this.animate("out")),this.duration)}progressBar(t){this.start_time_progress||(this.start_time_progress=t);const e=t-this.start_time_progress;if(this.previous_time_progress!==t){const t=e/this.duration*99;this.$progress.style.width=`${t}%`}e<this.duration&&(this.previous_time_progress=t,window.requestAnimationFrame(this.progressBar.bind(this)))}destroy(){"out"===this.$message.dataset.animation&&(super.destroy(),this.$message.removeEventListener("transitionend",this.endTransitionEventListener))}}class g extends a{constructor(t,e){super(t,e),this.$button=document.createElement("button"),this.clickEventListener=()=>this.destroy()}render(){this.init(),this.setCSS("btn",t.btn);const e=document.createElement("img");e.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMTYgMTYiPgogIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjg1NCAyLjE0NmEuNS41IDAgMCAxIDAgLjcwOGwtMTEgMTFhLjUuNSAwIDAgMS0uNzA4LS43MDhsMTEtMTFhLjUuNSAwIDAgMSAuNzA4IDBaIi8+CiAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMi4xNDYgMi4xNDZhLjUuNSAwIDAgMCAwIC43MDhsMTEgMTFhLjUuNSAwIDAgMCAuNzA4LS43MDhsLTExLTExYS41LjUgMCAwIDAtLjcwOCAwWiIvPgo8L3N2Zz4=",e.alt="Close Message",this.$button.classList.add("notijs_btn"),this.$button.appendChild(e),this.$button.addEventListener("click",this.clickEventListener),this.$message.appendChild(this.$button)}destroy(){super.destroy(),this.$button.removeEventListener("click",this.clickEventListener)}}class c extends a{constructor(t,e,s){super(t,e),this.promise=s,this.promise=s,this.$loader=document.createElement("img"),this.state="stopped",this.endTransitionEventListener=()=>this.destroy()}async render(){return this.init(),this.setCSS("animation",t.animation),this.$loader.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMTYgMTYiPgogIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTggM2E1IDUgMCAxIDAgNC41NDYgMi45MTQuNS41IDAgMCAxIC45MDgtLjQxN0E2IDYgMCAxIDEgOCAydjF6Ii8+CiAgPHBhdGggZD0iTTggNC40NjZWLjUzNGEuMjUuMjUgMCAwIDEgLjQxLS4xOTJsMi4zNiAxLjk2NmMuMTIuMS4xMi4yODQgMCAuMzg0TDguNDEgNC42NThBLjI1LjI1IDAgMCAxIDggNC40NjZ6Ii8+Cjwvc3ZnPg==",this.$loader.alt="Loading...",this.$message.addEventListener("transitionend",this.endTransitionEventListener),await this.exec()}async exec(){try{this.setState("running");const t=await this.promise.fn();return this.setState("success"),t}catch(t){return this.setState("error"),t}}setState(t){this.state=t;const e=this.$message.getElementsByTagName("span")[0];switch(this.state){case"error":this.$loader.classList.remove("notijs_rotate"),this.$loader.setAttribute("src",o),e.textContent=this.promise.error,setTimeout((()=>this.animate("out")),this.duration);break;case"running":this.$loader.classList.add("notijs_rotate"),this.$message.append(this.$loader);break;case"success":this.$loader.classList.remove("notijs_rotate"),this.$loader.setAttribute("src",n),e.textContent=this.promise.success,setTimeout((()=>this.animate("out")),this.duration);break;default:throw new Error}}destroy(){"out"===this.$message.dataset.animation&&(super.destroy(),this.$message.removeEventListener("transitionend",this.endTransitionEventListener))}}const d={message:function(t,e={}){let s;const{mode:i,...n}=e;switch(i){case"auto":default:s=new r(t,n);break;case"close":s=new g(t,n)}s.render()},promise:async function(t,e={},s){const i=new c(t,e,s);return await i.render()}};exports.notijs=d;
//# sourceMappingURL=index.js.map
