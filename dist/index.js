Object.defineProperty(exports,"__esModule",{value:!0});var t="render_message_container",s={duration:3e3,position:"top_right"},e={message:{width:"250px",height:"auto",border:"1px solid rgb(0 0 0 / 0.2)",borderRadius:"3px",boxShadow:"0 3px 10px rgb(0 0 0 / 0.2)",background:"white",padding:"10px",margin:"5px 0",fontSize:"13px",boxSizing:"border-box",opacity:0,transform:"translate(0, 0)",transition:"transform ease-in-out 250ms, opacity ease-in-out 250ms",display:"flex",alignItems:"center"},button:{width:"18px",height:"auto",background:"transparent",border:"none",cursor:"pointer",padding:0,display:"flex",justifyContent:"center",alignItems:"center"},icon:{width:"18px",height:"auto"},txt:{flex:1,margin:"0 6px 0 0"},progress:{position:"absolute",bottom:"1px",left:"1px",width:"0",height:"1px",background:"rgb(0 0 0 / 0.2)"},centered:{width:"100%"}};const i=["top","top_left","top_right","bottom","bottom_left","bottom_right"];function n(t,s,e){const i=document.createElement(t);for(let t in s)i.style[t]=s[t];for(let t in e)i.setAttribute(t,e[t]);return i}function o(t){if(!i.includes(t))throw new Error(`Position value must be: ${i.join(", ")}.`);let s={};const n=t.split("_");for(let t of n)s[t]=0;return 1===n.length?{...s,...e.centered}:s}var r="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGlkPSJPdXRsaW5lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZD0iTTIyLjMxOSw0LjQzMSw4LjUsMTguMjQ5YTEsMSwwLDAsMS0xLjQxNywwTDEuNzM5LDEyLjlhMSwxLDAsMCwwLTEuNDE3LDBoMGExLDEsMCwwLDAsMCwxLjQxN2w1LjM0Niw1LjM0NWEzLjAwOCwzLjAwOCwwLDAsMCw0LjI1LDBMMjMuNzM2LDUuODQ3YTEsMSwwLDAsMCwwLTEuNDE2aDBBMSwxLDAsMCwwLDIyLjMxOSw0LjQzMVoiLz48L3N2Zz4=",a="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGlkPSJPdXRsaW5lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+CjxwYXRoIGQ9Ik0yMy45NTEsMTIuM2wtLjcwNS01QTUuMDI0LDUuMDI0LDAsMCwwLDE4LjMsM0g1QTUuMDA2LDUuMDA2LDAsMCwwLDAsOHY1YTUuMDA2LDUuMDA2LDAsMCwwLDUsNUg3LjcxMmwxLjkxNCwzLjg3OGEzLjAzNywzLjAzNywwLDAsMCw1LjcyMS0xLjgzN0wxNS4wMTEsMThIMTlhNSw1LDAsMCwwLDQuOTUxLTUuN1pNNSw1SDdWMTZINWEzLDMsMCwwLDEtMy0zVjhBMywzLDAsMCwxLDUsNVptMTYuMjY0LDkuOTY4QTMsMywwLDAsMSwxOSwxNkgxMy44MzNhMSwxLDAsMCwwLS45ODcsMS4xNjJsLjUyOCwzLjJhMS4wMjQsMS4wMjQsMCwwLDEtLjIzMy44NCwxLjA3LDEuMDcsMCwwLDEtMS43MjItLjIxMkw5LjIzLDE2LjU1OEExLDEsMCwwLDAsOSwxNi4yNjZWNWg5LjNhMy4wMTIsMy4wMTIsMCwwLDEsMi45NywyLjU4MWwuNzA2LDVBMywzLDAsMCwxLDIxLjI2NCwxNC45NjhaIi8+Cjwvc3ZnPg==";class w{constructor(t,e){this.text=t,this.options=e,this.text=t,this.options={duration:e?.duration?1e3*e.duration:s.duration,icon:e?.icon,position:e?.position||s.position,extend:e?.extend||{}},this.animate=this.animate.bind(this),this.observer=new MutationObserver((t=>this.mutationObserverCB(t,this.animate)))}init(){this.$container=document.getElementById(t)||n("ol",{...o(this.options.position)}),this.$message=n("li",{...e.message,...this.options.extend},{role:"alert","aria-live":"polite","aria-atomic":"true"}),this.observer.observe(document,{attributes:!0,childList:!0,subtree:!0}),document.getElementById(t)||(this.css(),this.$container.id=t,this.$container.classList.add("notijs_container"),document.body.append(this.$container)),this.options.icon&&(this.$icon=this.icon(),this.$message.append(this.$icon));const s=n("span",{...e.txt});s.textContent=this.text,this.$message.append(s),this.$container.append(this.$message)}animate(t){this.$message.dataset.animation=t;const[s,e]=function(t,s){switch(s){case"top":return"in"===t?[0,10]:[0,-10];case"bottom":return"in"===t?[0,-10]:[0,10];case"top_right":case"bottom_right":return"in"===t?[-10,0]:[10,0];case"top_left":case"bottom_left":return"in"===t?[10,0]:[-10,0];default:return[0,0]}}(t,this.options.position);setTimeout((()=>{this.$message.style.transform=`translate(${s}px, ${e}px)`,this.$message.style.opacity="in"===t?"1":"0"})),this.observer.disconnect()}destroy(){this.$message.remove()}mutationObserverCB(s,e){for(const i of s)"childList"===i.type&&i.target?.id===t&&e("in")}icon(){let t;switch(this.options.icon){case"error":t=a;break;case"notification":t="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij4KPHBhdGggZD0iTTIwLDBINEE0LDQsMCwwLDAsMCw0VjE2YTQsNCwwLDAsMCw0LDRINi45bDQuNDUxLDMuNzYzYTEsMSwwLDAsMCwxLjI5MiwwTDE3LjEsMjBIMjBhNCw0LDAsMCwwLDQtNFY0QTQsNCwwLDAsMCwyMCwwWm0yLDE2YTIsMiwwLDAsMS0yLDJIMTcuMWEyLDIsMCwwLDAtMS4yOTEuNDczTDEyLDIxLjY5LDguMTkzLDE4LjQ3M2gwQTIsMiwwLDAsMCw2LjksMThINGEyLDIsMCwwLDEtMi0yVjRBMiwyLDAsMCwxLDQsMkgyMGEyLDIsMCwwLDEsMiwyWiIvPgo8cGF0aCBkPSJNNyw3aDVhMSwxLDAsMCwwLDAtMkg3QTEsMSwwLDAsMCw3LDdaIi8+CjxwYXRoIGQ9Ik0xNyw5SDdhMSwxLDAsMCwwLDAsMkgxN2ExLDEsMCwwLDAsMC0yWiIvPgo8cGF0aCBkPSJNMTcsMTNIN2ExLDEsMCwwLDAsMCwySDE3YTEsMSwwLDAsMCwwLTJaIi8+Cjwvc3ZnPg==";break;case"success":t=r;break;default:throw new Error("Invalid Icon")}return n("img",{...e.icon,margin:"0 8px 0 0"},{src:t})}css(){const t=n("style");t.id="notijs_styles",t.textContent=".notijs_container{position:fixed;width: 250px;height: auto;flex-direction: column;list-style:none;padding: 5px 0;margin: 0;display: flex;align-items: center;}.notijs_rotate{animation: notijs_rotation .75s linear infinite;}@keyframes notijs_rotation {from{transform: rotate(0deg);}to{transform: rotate(359deg);}",document.head.append(t)}}class M extends w{constructor(t,s){super(t,s),this.endTransitionEventListener=()=>this.destroy()}render(){this.init(),this.$progress=n("div",{...e.progress}),this.$message.addEventListener("transitionend",this.endTransitionEventListener),this.$message.appendChild(this.$progress),window.requestAnimationFrame(this.progress.bind(this)),setTimeout((()=>this.animate("out")),this.options.duration)}progress(t){this.start_time_progress||(this.start_time_progress=t);const s=t-this.start_time_progress;if(this.previous_time_progress!==t){const t=s/this.options.duration*99;this.$progress.style.width=`${t}%`}s<this.options.duration&&(this.previous_time_progress=t,window.requestAnimationFrame(this.progress.bind(this)))}destroy(){"out"===this.$message.dataset.animation&&(super.destroy(),this.$message.removeEventListener("transitionend",this.endTransitionEventListener))}}class L extends w{constructor(t,s){super(t,s),this.$button=n("button",{...e.button}),this.clickEventListener=()=>this.destroy()}render(){this.init();const t=n("img",{...e.icon},{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij4KPHBhdGggZD0iTTIzLjcwNy4yOTNoMGExLDEsMCwwLDAtMS40MTQsMEwxMiwxMC41ODYsMS43MDcuMjkzYTEsMSwwLDAsMC0xLjQxNCwwaDBhMSwxLDAsMCwwLDAsMS40MTRMMTAuNTg2LDEyLC4yOTMsMjIuMjkzYTEsMSwwLDAsMCwwLDEuNDE0aDBhMSwxLDAsMCwwLDEuNDE0LDBMMTIsMTMuNDE0LDIyLjI5MywyMy43MDdhMSwxLDAsMCwwLDEuNDE0LDBoMGExLDEsMCwwLDAsMC0xLjQxNEwxMy40MTQsMTIsMjMuNzA3LDEuNzA3QTEsMSwwLDAsMCwyMy43MDcuMjkzWiIvPgo8L3N2Zz4="});this.$button.appendChild(t),this.$message.appendChild(this.$button),this.$button.addEventListener("click",this.clickEventListener)}destroy(){super.destroy(),this.$button.removeEventListener("click",this.clickEventListener)}}class c extends w{constructor(t,s,e){super(t,s),this.promise=e,this.promise=e,this.state="stopped",this.endTransitionEventListener=()=>this.destroy()}async render(){return this.init(),this.$loader=n("img",{...e.icon},{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGlkPSJPdXRsaW5lIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+CiAgPHBhdGggZD0iTTEyLDI0QTEyLDEyLDAsMSwxLDIyLjcxNCw2LjU5YTEsMSwwLDEsMS0xLjc4NS45LDEwLDEwLDAsMSwwLS4wMTEsOS4wMzgsMSwxLDAsMCwxLDEuNzgxLjkwOEExMS45NTUsMTEuOTU1LDAsMCwxLDEyLDI0WiIvPgo8L3N2Zz4=",alt:"Loading..."}),this.$message.addEventListener("transitionend",this.endTransitionEventListener),await this.exec()}async exec(){try{this.setState("running");const t=await this.promise.fn();return this.setState("success",t),t}catch(t){return this.setState("error"),t}}setState(t,s){this.state=t;const e=this.$message.getElementsByTagName("span")[0];switch(this.state){case"error":this.$loader.classList.remove("notijs_rotate"),this.$loader.setAttribute("src",a),e.textContent=this.promise.error,setTimeout((()=>this.animate("out")),this.options.duration);break;case"running":this.$loader.classList.add("notijs_rotate"),this.$message.append(this.$loader);break;case"success":this.$loader.classList.remove("notijs_rotate"),this.$loader.setAttribute("src",r),e.textContent=this.promise.success,setTimeout((()=>this.animate("out")),this.options.duration);break;default:throw new Error}}destroy(){"out"===this.$message.dataset.animation&&(super.destroy(),this.$message.removeEventListener("transitionend",this.endTransitionEventListener))}}const d={render:function(t,s={}){let e;const{mode:i,...n}=s;switch(i){case"auto":default:e=new M(t,n);break;case"close":e=new L(t,n)}e.render()},promise:async function(t,s={},e){const i=new c(t,s,e);return await i.render()}};exports.notijs=d;
//# sourceMappingURL=index.js.map
