{"version":3,"file":"index.js","sources":["../src/settings.ts","../src/helpers.ts","../src/Message.ts","../src/Auto.ts","../src/Static.ts","../src/index.ts"],"sourcesContent":["export default {\n  id: 'render_message_container',\n  options: {\n    mode: 'auto',\n    duration: 3000,\n    position: 'top_right',\n  },\n  styles: {\n    container: {\n      position: 'fixed',\n      width: '250px',\n      height: 'auto',\n      flexDirection: 'column',\n      listStyle: 'none',\n      padding: '5px 0',\n      margin: '0',\n      display: 'flex',\n      alignItems: 'center',\n      \n    },\n    message: {\n      width: '250px',\n      height: 'auto',\n      border: '1px solid gray',\n      borderRadius: '3px',\n      boxShadow: '0 3px 10px rgb(0 0 0 / 0.2)',\n      background: 'white',\n      padding: '10px',\n      margin: '5px 0',\n      fontSize: '13px',\n      boxSizing: 'border-box',\n      opacity: 0,\n      transform: 'translate(0, 0)',\n      transition: 'transform ease-in-out 250ms, opacity ease-in-out 250ms',\n      display: 'flex',\n      alignItems: 'center',\n    },\n    button: {\n      fontSize: '13px',\n      padding: '3px 6px',\n      background: 'none',\n      border: '1px solid gray',\n      borderRadius: '25px',\n      cursor: 'pointer'\n    },\n    progress: {\n      position: 'absolute',\n      bottom: '1px',\n      left: '1px',\n      width: '0',\n      height: '1px',\n      background: 'blue',\n    },\n    centered: {\n      width: '100%',\n    },\n  },\n};\n","import SETTINGS from './settings';\n\nconst POSITIONS = [\n  'top',\n  'top_left',\n  'top_right',\n  'bottom',\n  'bottom_left',\n  'bottom_right',\n];\n\nconst ANIMATION_SIZE = 10;\n\nexport function setDOM(\n  element: HTMLElement,\n  styles?: { [key: string]: string | number } | null,\n  attrs?: { [key: string]: string } | null,\n) {\n  for (let key in styles) {\n    // @ts-ignore\n    element.style[key] = styles[key];\n  }\n\n  for (let key in attrs) {\n    element.setAttribute(key, attrs[key]);\n  }\n\n  return element;\n}\n\nexport function setPosition(position: string) {\n  if (!POSITIONS.includes(position)) {\n    throw new Error(`Position value must be: ${POSITIONS.join(', ')}.`);\n  }\n\n  let currentPosition = {} as { [key: string]: string | number };\n  const positions_values = position.split('_');\n\n  for (let key of positions_values) {\n    currentPosition[key] = 0;\n  }\n\n  return positions_values.length === 1\n    ? { ...currentPosition, ...SETTINGS.styles.centered }\n    : currentPosition;\n}\n\nexport function setTranslate(effect: string, position: string) {\n  switch (position) {\n    case 'top':\n      return effect === 'in' ? [0, ANIMATION_SIZE] : [0, -ANIMATION_SIZE];\n    case 'bottom':\n      return effect === 'in' ? [0, -ANIMATION_SIZE] : [0, ANIMATION_SIZE];\n    case 'top_right':\n    case 'bottom_right':\n      return effect === 'in' ? [-ANIMATION_SIZE, 0] : [ANIMATION_SIZE, 0];\n    case 'top_left':\n    case 'bottom_left':\n      return effect === 'in' ? [ANIMATION_SIZE, 0] : [-ANIMATION_SIZE, 0];\n    default:\n      return [0, 0];\n  }\n}\n","import { INotifierOptions } from './index';\nimport * as Helper from './helpers';\nimport SETTINGS from './settings';\n\nexport class Message implements Message {\n  private observer: MutationObserver;\n  public $container!: HTMLElement;\n  public $message!: HTMLElement;\n\n  constructor(public text: string, public options: INotifierOptions) {\n    this.text = text;\n    this.options = {\n      duration: options?.duration\n        ? options.duration * 1000\n        : SETTINGS.options.duration,\n      position: options?.position || SETTINGS.options.position,\n      extend: options?.extend || {},\n    };\n\n    this.animate = this.animate.bind(this);\n\n    this.observer = new MutationObserver((mutationsList) =>\n      // @ts-ignore\n      this.mutationObserverCB(mutationsList, this.animate),\n    );\n  }\n\n  public init() {\n    this.$container =\n      document.getElementById(SETTINGS.id) ||\n      Helper.setDOM(document.createElement('ol'), {\n        ...SETTINGS.styles.container,\n        ...Helper.setPosition(this.options.position),\n      });\n\n    this.$message = Helper.setDOM(document.createElement('li'), {\n      ...SETTINGS.styles.message,\n      ...this.options.extend,\n    });\n\n    this.observer.observe(document, {\n      attributes: true,\n      childList: true,\n      subtree: true,\n    });\n\n    if (!document.getElementById(SETTINGS.id)) {\n      this.$container.id = SETTINGS.id;\n      document.body.append(this.$container);\n    }\n\n    const messageTxt = Helper.setDOM(document.createElement('span'), {\n      flex: 1,\n    });\n\n    messageTxt.textContent = this.text;\n    this.$message.append(messageTxt);\n    this.$container.append(this.$message);\n  }\n\n  protected animate(effect: 'in' | 'out') {\n    this.$message.dataset.animation = effect;\n    const [x, y] = Helper.setTranslate(effect, this.options.position);\n\n    setTimeout(() => {\n      this.$message.style.transform = `translate(${x}px, ${y}px)`;\n      this.$message.style.opacity = effect === 'in' ? '1' : '0';\n    });\n\n    this.observer.disconnect();\n  }\n\n  protected destroy() {\n    this.$message.remove();\n  }\n\n  private mutationObserverCB(\n    mutationsList: (MutationRecord & { target: { id: string } })[],\n    cb: (str: 'in') => void,\n  ) {\n    for (const mutation of mutationsList) {\n      if (\n        mutation.type === 'childList' &&\n        mutation.target?.id === SETTINGS.id\n      ) {\n        cb('in');\n      }\n    }\n  }\n}\n","import { Message } from './Message';\nimport { INotifierOptions } from './index';\nimport * as Helper from './helpers';\nimport SETTINGS from './settings';\n\nexport class Auto extends Message {\n  $progress!: HTMLElement;\n  start_time_progress!: number;\n  previous_time_progress!: number;\n\n  protected endTransitionEventListener: EventListener;\n\n  constructor(text: string, options: INotifierOptions) {\n    super(text, options);\n    this.endTransitionEventListener = () => this.destroy();\n  }\n\n  public render() {\n    this.init();\n    this.$progress = Helper.setDOM(document.createElement('div'), {\n      ...SETTINGS.styles.progress,\n    });\n    this.$message.addEventListener(\n      'transitionend',\n      this.endTransitionEventListener,\n    );\n\n    this.$message.appendChild(this.$progress);\n    window.requestAnimationFrame(this.progress.bind(this));\n\n    setTimeout(() => this.animate('out'), this.options.duration);\n  }\n\n  private progress(current_time_progress: number) {\n    if (!this.start_time_progress) {\n      this.start_time_progress = current_time_progress;\n    }\n\n    const elapsed = current_time_progress - this.start_time_progress;\n\n    if (this.previous_time_progress !== current_time_progress) {\n      const count = (elapsed / this.options.duration) * 99;\n      this.$progress.style.width = `${count}%`;\n    }\n\n    if (elapsed < this.options.duration) {\n      this.previous_time_progress = current_time_progress;\n      window.requestAnimationFrame(this.progress.bind(this));\n    }\n  }\n\n  protected destroy() {\n    if (this.$message.dataset.animation === 'out') {\n      super.destroy();\n\n      this.$message.removeEventListener(\n        'transitionend',\n        this.endTransitionEventListener,\n      );\n    }\n  }\n}\n","import { Message } from './Message';\nimport { INotifierOptions } from './index';\nimport SETTINGS from './settings';\nimport * as Helper from './helpers';\n\nexport class Static extends Message {\n  public $close: HTMLElement;\n  protected clickEventListener: EventListener;\n\n  constructor(text: string, options: INotifierOptions) {\n    super(text, options);\n    this.$close = Helper.setDOM(document.createElement('button'), {\n      ...SETTINGS.styles.button,\n    });\n\n    this.clickEventListener = () => this.destroy();\n  }\n\n  public render() {\n    this.init();\n    this.$close.textContent = 'Close'\n    this.$message.appendChild(this.$close);\n    this.$close.addEventListener('click', this.clickEventListener);\n  }\n\n  protected destroy() {\n    super.destroy();\n    this.$close.removeEventListener('click', this.clickEventListener);\n  }\n}\n","import { Auto } from './Auto';\nimport { Static } from './Static';\nimport { Dict } from './types'\n\nexport interface INotifierOptions {\n  duration: number;\n  position: string;\n  extend: Dict<{}>;\n}\n\nfunction auto(msg: string, options: INotifierOptions = {} as INotifierOptions) {\n  const newAuto = new Auto(msg, options);\n  newAuto.render();\n}\n\nfunction close(\n  msg: string,\n  options: INotifierOptions = {} as INotifierOptions,\n) {\n  const newStatic = new Static(msg, options);\n  newStatic.render();\n}\n\nexport const notijs = {\n  auto,\n  close,\n};\n"],"names":["Helper.setDOM","Helper.setPosition","Helper.setTranslate"],"mappings":"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"}