const t=["top","top_left","top_right","bottom","bottom_left","bottom_right"];function s(t,s,i){for(let i in s)t.style[i]=s[i];for(let s in i)t.setAttribute(s,i[s]);return t}function i(s){if(!t.includes(s))throw new Error(`Position value must be: ${t.join(", ")}.`);let i={};const e=s.split("_");for(let t of e)i[t]=0;return 1===e.length?{...i,width:"100%"}:i}const e={body:".notijs_container{position:fixed;width:250px;height: auto;flex-direction:column;list-style:none;padding:5px 0;margin:0;display:flex;align-items:center;}.notijs_message{width:250px;height:auto;border:1px solid rgb(0 0 0 / 0.2);border-radius:3px;box-shadow:0 3px 10px rgb(0 0 0 / 0.2);background:white;padding:10px;margin:5px 0;font-size:13px;box-sizing:border-box;opacity:0;transform:translate(0,0);transition:transform ease-in-out 250ms, opacity ease-in-out 250ms;display:flex;align-items:center;}.notijs_txt{flex:1;margin;0 6px 0 0;}",progress:".notijs_progress{position:absolute;bottom:1px;left:1px;width:0;height:1px;background:rgb(0 0 0 / 0.2)}",btn:".notijs_btn{background:transparent;border:none;cursor:pointer;padding:0 0 0 6px;display:flex;justify-content:center;align-items:center;}",animation:".notijs_rotate{animation: notijs_rotation .75s linear infinite;}@keyframes notijs_rotation {from{transform: rotate(0deg);}to{transform: rotate(359deg);}"},n={role:"alert","aria-live":"polite","aria-atomic":"true"},o="render_message_container",r=3,a="top_right";var g="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMTYgMTYiPgogIDxwYXRoIGQ9Ik0xMy44NTQgMy42NDZhLjUuNSAwIDAgMSAwIC43MDhsLTcgN2EuNS41IDAgMCAxLS43MDggMGwtMy41LTMuNWEuNS41IDAgMSAxIC43MDgtLjcwOEw2LjUgMTAuMjkzbDYuNjQ2LTYuNjQ3YS41LjUgMCAwIDEgLjcwOCAweiIvPgo8L3N2Zz4=",c="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMTYgMTYiPgogIDxwYXRoIGQ9Ik03LjkzOCAyLjAxNkEuMTMuMTMgMCAwIDEgOC4wMDIgMmEuMTMuMTMgMCAwIDEgLjA2My4wMTYuMTQ2LjE0NiAwIDAgMSAuMDU0LjA1N2w2Ljg1NyAxMS42NjdjLjAzNi4wNi4wMzUuMTI0LjAwMi4xODNhLjE2My4xNjMgMCAwIDEtLjA1NC4wNi4xMTYuMTE2IDAgMCAxLS4wNjYuMDE3SDEuMTQ2YS4xMTUuMTE1IDAgMCAxLS4wNjYtLjAxNy4xNjMuMTYzIDAgMCAxLS4wNTQtLjA2LjE3Ni4xNzYgMCAwIDEgLjAwMi0uMTgzTDcuODg0IDIuMDczYS4xNDcuMTQ3IDAgMCAxIC4wNTQtLjA1N3ptMS4wNDQtLjQ1YTEuMTMgMS4xMyAwIDAgMC0xLjk2IDBMLjE2NSAxMy4yMzNjLS40NTcuNzc4LjA5MSAxLjc2Ny45OCAxLjc2N2gxMy43MTNjLjg4OSAwIDEuNDM4LS45OS45OC0xLjc2N0w4Ljk4MiAxLjU2NnoiLz4KICA8cGF0aCBkPSJNNy4wMDIgMTJhMSAxIDAgMSAxIDIgMCAxIDEgMCAwIDEtMiAwek03LjEgNS45OTVhLjkwNS45MDUgMCAxIDEgMS44IDBsLS4zNSAzLjUwN2EuNTUyLjU1MiAwIDAgMS0xLjEgMEw3LjEgNS45OTV6Ii8+Cjwvc3ZnPg==";class M{constructor(t,s){this.text=t,this.options=s,this.text=t,this.options={duration:1e3*(s?.duration||r),position:s?.position||a,icon:s?.icon,extend:s?.extend},this.$container=document.getElementById(o)||document.createElement("ol"),this.animate=this.animate.bind(this),this.observer=new MutationObserver((t=>{for(const s of t)"childList"===s.type&&s.target.id===o&&this.animate("in")}))}init(){document.getElementById(o)||(this.css("body",e.body),this.$container.id=o,this.$container.classList.add("notijs_container"),this.$container=s(this.$container,{...i(this.options.position)},{"data-position":this.options.position}),document.body.append(this.$container)),this.$message=document.createElement("li"),this.$message.classList.add("notijs_message"),this.$message=s(this.$message,this.options?.extend?.message,n),this.observer.observe(document,{childList:!0,subtree:!0}),this.options.position!==this.$container.dataset.position&&s(this.$container,{...i(this.options.position)}),this.options.icon&&(this.$icon=this.icon(),this.$message.append(this.$icon));const t=document.createElement("span");t.classList.add("notijs_txt"),t.textContent=this.text,this.$message.append(t),this.$container.append(this.$message)}animate(t){this.$message.dataset.animation=t;const[s,i]=function(t,s){switch(s){case"top":return"in"===t?[0,10]:[0,-10];case"bottom":return"in"===t?[0,-10]:[0,10];case"top_right":case"bottom_right":return"in"===t?[-10,0]:[10,0];case"top_left":case"bottom_left":return"in"===t?[10,0]:[-10,0];default:return[0,0]}}(t,this.options.position);setTimeout((()=>{this.$message.style.transform=`translate(${s}px, ${i}px)`,this.$message.style.opacity="in"===t?"1":"0"})),this.observer.disconnect()}destroy(){this.$message.remove()}icon(){let t=s(document.createElement("img"),{margin:"0 8px 0 0",width:"18px",height:"auto"});return t="object"==typeof this.options.icon?s(t,null,{src:this.options.icon.src,alt:this.options.icon.alt||"Icon"}):s(t,null,{src:"error"===this.options.icon?c:"success"===this.options.icon?g:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiAgdmlld0JveD0iMCAwIDE2IDE2Ij4KICA8cGF0aCBkPSJNMTQgMWExIDEgMCAwIDEgMSAxdjhhMSAxIDAgMCAxLTEgMWgtMi41YTIgMiAwIDAgMC0xLjYuOEw4IDE0LjMzMyA2LjEgMTEuOGEyIDIgMCAwIDAtMS42LS44SDJhMSAxIDAgMCAxLTEtMVYyYTEgMSAwIDAgMSAxLTFoMTJ6TTIgMGEyIDIgMCAwIDAtMiAydjhhMiAyIDAgMCAwIDIgMmgyLjVhMSAxIDAgMCAxIC44LjRsMS45IDIuNTMzYTEgMSAwIDAgMCAxLjYgMGwxLjktMi41MzNhMSAxIDAgMCAxIC44LS40SDE0YTIgMiAwIDAgMCAyLTJWMmEyIDIgMCAwIDAtMi0ySDJ6Ii8+CiAgPHBhdGggZD0iTTMgMy41YS41LjUgMCAwIDEgLjUtLjVoOWEuNS41IDAgMCAxIDAgMWgtOWEuNS41IDAgMCAxLS41LS41ek0zIDZhLjUuNSAwIDAgMSAuNS0uNWg5YS41LjUgMCAwIDEgMCAxaC05QS41LjUgMCAwIDEgMyA2em0wIDIuNWEuNS41IDAgMCAxIC41LS41aDVhLjUuNSAwIDAgMSAwIDFoLTVhLjUuNSAwIDAgMS0uNS0uNXoiLz4KPC9zdmc+",alt:this.options.icon}),t}css(t,s){const i=`notijs_${t}`;if(!document.getElementById(i)){const t=document.createElement("style");t.id=i,t.textContent=s,document.head.append(t)}}}class d extends M{constructor(t,s){super(t,s),this.endTransitionEventListener=()=>this.destroy()}render(){this.init(),this.css("progress",e.progress),this.$progress=document.createElement("div"),this.$progress.classList.add("notijs_progress"),this.$progress=s(this.$progress,this.options?.extend?.progressbar),this.$message.addEventListener("transitionend",this.endTransitionEventListener),this.$message.appendChild(this.$progress),window.requestAnimationFrame(this.progress.bind(this)),setTimeout((()=>this.animate("out")),this.options.duration)}progress(t){this.start_time_progress||(this.start_time_progress=t);const s=t-this.start_time_progress;if(this.previous_time_progress!==t){const t=s/this.options.duration*99;this.$progress.style.width=`${t}%`}s<this.options.duration&&(this.previous_time_progress=t,window.requestAnimationFrame(this.progress.bind(this)))}destroy(){"out"===this.$message.dataset.animation&&(super.destroy(),this.$message.removeEventListener("transitionend",this.endTransitionEventListener))}}class h extends M{constructor(t,s){super(t,s),this.$button=document.createElement("button"),this.clickEventListener=()=>this.destroy()}render(){this.init(),this.css("btn",e.btn);const t=document.createElement("img");t.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMTYgMTYiPgogIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjg1NCAyLjE0NmEuNS41IDAgMCAxIDAgLjcwOGwtMTEgMTFhLjUuNSAwIDAgMS0uNzA4LS43MDhsMTEtMTFhLjUuNSAwIDAgMSAuNzA4IDBaIi8+CiAgPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMi4xNDYgMi4xNDZhLjUuNSAwIDAgMCAwIC43MDhsMTEgMTFhLjUuNSAwIDAgMCAuNzA4LS43MDhsLTExLTExYS41LjUgMCAwIDAtLjcwOCAwWiIvPgo8L3N2Zz4=",t.alt="Close Message",this.$button.classList.add("notijs_btn"),this.$button.appendChild(t),this.$message.appendChild(this.$button),this.$button.addEventListener("click",this.clickEventListener)}destroy(){super.destroy(),this.$button.removeEventListener("click",this.clickEventListener)}}class u extends M{constructor(t,s,i){super(t,s),this.promise=i,this.promise=i,this.$loader=document.createElement("img"),this.state="stopped",this.endTransitionEventListener=()=>this.destroy()}async render(){return this.init(),this.css("animation",e.animation),this.$loader.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMTYgMTYiPgogIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTggM2E1IDUgMCAxIDAgNC41NDYgMi45MTQuNS41IDAgMCAxIC45MDgtLjQxN0E2IDYgMCAxIDEgOCAydjF6Ii8+CiAgPHBhdGggZD0iTTggNC40NjZWLjUzNGEuMjUuMjUgMCAwIDEgLjQxLS4xOTJsMi4zNiAxLjk2NmMuMTIuMS4xMi4yODQgMCAuMzg0TDguNDEgNC42NThBLjI1LjI1IDAgMCAxIDggNC40NjZ6Ii8+Cjwvc3ZnPg==",this.$loader.alt="Loading...",this.$message.addEventListener("transitionend",this.endTransitionEventListener),await this.exec()}async exec(){try{this.setState("running");const t=await this.promise.fn();return this.setState("success"),t}catch(t){return this.setState("error"),t}}setState(t){this.state=t;const s=this.$message.getElementsByTagName("span")[0];switch(this.state){case"error":this.$loader.classList.remove("notijs_rotate"),this.$loader.setAttribute("src",c),s.textContent=this.promise.error,setTimeout((()=>this.animate("out")),this.options.duration);break;case"running":this.$loader.classList.add("notijs_rotate"),this.$message.append(this.$loader);break;case"success":this.$loader.classList.remove("notijs_rotate"),this.$loader.setAttribute("src",g),s.textContent=this.promise.success,setTimeout((()=>this.animate("out")),this.options.duration);break;default:throw new Error}}destroy(){"out"===this.$message.dataset.animation&&(super.destroy(),this.$message.removeEventListener("transitionend",this.endTransitionEventListener))}}const m={render:function(t,s={}){let i;const{mode:e,...n}=s;switch(e){case"auto":default:i=new d(t,n);break;case"close":i=new h(t,n)}i.render()},promise:async function(t,s={},i){const e=new u(t,s,i);return await e.render()}};export{m as notijs};
//# sourceMappingURL=index.mjs.map
